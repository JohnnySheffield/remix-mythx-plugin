(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,r){e.exports=r(60)},38:function(e,t,r){},39:function(e,t,r){},60:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(27),o=r.n(s),c=(r(38),r(12)),u=r(13),i=r(17),l=r(14),S=r(16),p=(r(39),r(8)),h=r(15),E={LOGIN_REQUEST:"USER_LOGIN_REQUEST",LOGIN_SUCCESS:"USER_LOGIN_SUCCESS",LOGIN_FAILURE:"USER_LOGIN_FAILURE",REFRESH_REQUEST:"USER_REFRESH_REQUEST",REFRESH_SUCCESS:"USER_REFRESH_SUCCESS",REFRESH_FAILURE:"USER_REFRESH_FAILURE",LOGOUT:"USER_LOGOUT"},d={ANALYSIS_SUBMIT_REQUEST:"CONTRACT_ANALYSIS_SUBMIT_REQUEST",ANALYSIS_SUBMIT_SUCCESS:"CONTRACT_ANALYSIS_SUBMIT_SUCCESS",ANALYSIS_SUBMIT_FAILURE:"CONTRACT_ANALYSIS_SUBMIT_FAILURE",ANALYSIS_STATUS_REQUEST:"CONTRACT_ANALYSIS_STATUS_REQUEST",ANALYSIS_STATUS_SUCCESS:"CONTRACT_ANALYSIS_STATUS_SUCCESS",ANALYSIS_STATUS_FAILURE:"CONTRACT_ANALYSIS_STATUS_FAILURE",ANALYSIS_REPORT_REQUEST:"CONTRACT_ANALYSIS_REPORT_REQUEST",ANALYSIS_REPORT_SUCCESS:"CONTRACT_ANALYSIS_REPORT_SUCCESS",ANALYSIS_REPORT_FAILURE:"CONTRACT_ANALYSIS_REPORT_FAILURE"},f=r(5),O={MythX:{apiUrl:"https://api.mythx.io/v1"},Remix:{trustedOrigins:["http://remix-alpha.ethereum.org","http://remix.ethereum.org","https://remix-alpha.ethereum.org","https://remix.ethereum.org"]}};function b(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.auth.access?{Authorization:"Bearer "+e.auth.access}:{}}var g={login:function(e,t){var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ethAddress:e,password:t})},n={address:e};return fetch("".concat(O.MythX.apiUrl,"/auth/login"),r).then(R).then(function(e){return n.auth=e,localStorage.setItem("user",JSON.stringify(n)),n})},refreshToken:function(e,t){var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:e,refreshToken:t})};return fetch("".concat(O.MythX.apiUrl,"/auth/refresh"),r).then(R).then(function(e){var t=JSON.parse(localStorage.getItem("user")||"{}");return t.auth=e,localStorage.setItem("user",JSON.stringify(t)),t})},logout:m,getAnalysationStatus:function(e){var t={method:"GET",headers:Object(f.a)({"Content-Type":"application/json"},b())};return fetch("".concat(O.MythX.apiUrl,"/analyses/").concat(e),t).then(R)},getAnalysationReport:function(e){var t={method:"GET",headers:Object(f.a)({"Content-Type":"application/json"},b())};return fetch("".concat(O.MythX.apiUrl,"/analyses/").concat(e,"/issues"),t).then(R)},submitContractsForAnalysation:function(e,t){var r={};for(var n in e)if(e.hasOwnProperty(n)){var a=e[n],s=Object.keys(a)[0],o=a[s];r[n]={contractName:s,bytecode:o.evm.bytecode.object,deployedBytecode:o.evm.deployedBytecode.object,sourceMap:o.evm.bytecode.sourceMap,deployedSourceMap:o.evm.deployedBytecode.sourceMap,sources:Object.entries(t).reduce(function(e,t){return e[t[0]]={source:t[1].content},e},{}),sourceList:Object.keys(t),version:JSON.parse(o.metadata).compiler.version,analysisMode:"quick"}}var c=[];for(var u in r)r.hasOwnProperty(u)&&c.push(A(r[u]));return Promise.all(c)}};function m(){try{localStorage.removeItem("user")}catch(e){}}function A(e){var t={method:"POST",headers:Object(f.a)({"Content-Type":"application/json"},b()),body:JSON.stringify({data:e})};return fetch("".concat(O.MythX.apiUrl,"/analyses"),t).then(R)}function R(e){return e.text().then(function(t){var r={};try{r=t&&JSON.parse(t)}catch(a){}if(!e.ok){if(401===e.status)return m(),window.location.reload(!0),Promise.reject("Unauthorized");var n=r&&r.message||e.statusText;return Promise.reject(n)}return r})}var y={login:function(e,t){return function(r){var n;r((n={address:e},{type:E.LOGIN_REQUEST,user:n})),g.login(e,t).then(function(e){r(function(e){return{type:E.LOGIN_SUCCESS,user:e}}(e))},function(e){r(function(e){return{type:E.LOGIN_FAILURE,error:e}}(e.toString()))})}},logout:function(){return g.logout(),{type:E.LOGOUT}}};var _={analyzeContracts:function(e,t){return function(r){r({type:d.ANALYSIS_SUBMIT_REQUEST}),g.submitContractsForAnalysation(e,t).then(function(e){return r({type:d.ANALYSIS_SUBMIT_SUCCESS,payload:e})}).catch(function(e){return r(function(e){return{type:d.ANALYSIS_SUBMIT_FAILURE,error:e}}(e.toString()))})}}};var I=function(e){function t(e){var r;return Object(c.a)(this,t),(r=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.name;r.setState(Object(p.a)({},n,t.value))},r.handleSubmit=function(e){e.preventDefault(),r.props.dispatch(y.login(r.state.address,r.state.password))},r.handleLogout=function(){r.props.dispatch(y.logout())},r.state={address:"",password:""},r}return Object(S.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.loggedIn?a.a.createElement("p",null,"Logged in as ",this.props.user.address,"! \xa0",a.a.createElement("button",{onClick:this.handleLogout},"Logout!")):a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("p",null,"Verify security of your smart contract on complilation. Sign up for a free account on\xa0",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://mythx.io"},"https://mythx.io")),a.a.createElement("p",null,a.a.createElement("label",null,"MythiX address"),a.a.createElement("br",null),a.a.createElement("input",{type:"text",placeholder:"0x123...",value:this.state.address,onChange:this.handleInputChange,name:"address"})),a.a.createElement("p",null,a.a.createElement("label",null,"MythiX password"),a.a.createElement("br",null),a.a.createElement("input",{type:"password",placeholder:"super secret password",value:this.state.password,onChange:this.handleInputChange,name:"password"})),a.a.createElement("p",null,a.a.createElement("input",{type:"submit",value:"Activate"})))}}]),t}(a.a.Component);var v=Object(h.b)(function(e){var t=e.authentication;return{loggedIn:t.loggedIn,user:t.user}})(I),T=r(9),U=r(29),L=JSON.parse(localStorage.getItem("user")),C=L?{loggedIn:!0,user:L}:{loggedIn:!1,loggingIn:!1,user:{}};var j={reports:{},isSubmitting:!1,isRequestingReport:!1,polling:{}};var N=Object(T.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.LOGIN_REQUEST:return Object(f.a)({},e,{loggingIn:!0,user:t.user});case E.LOGIN_SUCCESS:return Object(f.a)({},e,{loggingIn:!1,loggedIn:!0,user:t.user});case E.LOGIN_FAILURE:return Object(f.a)({},e,{loggingIn:!1,loggedIn:!1,user:{}});case E.REFRESH_REQUEST:return{refreshing:!0,user:t.user};case E.REFRESH_SUCCESS:return Object(f.a)({},e,{refreshing:!1,loggedIn:!0,user:t.user});case E.REFRESH_FAILURE:return Object(f.a)({},e,{refreshing:!1,loggedIn:!1,user:{}});case E.LOGOUT:return{loggingIn:!1,loggedIn:!1,user:{}};default:return e}},analysis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.ANALYSIS_SUBMIT_REQUEST:return Object(f.a)({},e,{isSubmitting:!0});case d.ANALYSIS_SUBMIT_SUCCESS:return Object(f.a)({},e,{isSubmitting:!1,requests:t.requests});case d.ANALYSIS_SUBMIT_FAILURE:return Object(f.a)({},e,{isSubmitting:!1});case d.ANALYSIS_STATUS_REQUEST:var r=e;return r.polling=Object(f.a)({},r.polling,Object(p.a)({},t.uuid,!0)),r;case d.ANALYSIS_STATUS_SUCCESS:case d.ANALYSIS_STATUS_FAILURE:return e.polling=Object(f.a)({},e.polling,Object(p.a)({},t.uuid,!1)),Object(f.a)({},e);case d.ANALYSIS_REPORT_REQUEST:return Object(f.a)({},e,{isRequestingReport:!0});case d.ANALYSIS_REPORT_SUCCESS:return e.reports=Object(f.a)({},e.reports,Object(p.a)({},t.uuid,t.report)),Object(f.a)({},e,{isRequestingReport:!1});case d.ANALYSIS_REPORT_FAILURE:return e.reports=Object(f.a)({},e.reports,Object(p.a)({},t.uuid,null)),Object(f.a)({},e,{isRequestingReport:!1});default:return e}}}),x=r(6),w=r.n(x),k=r(4),F=w.a.mark(B),Y=w.a.mark(G),M=w.a.mark(J),P=w.a.mark(H),Q=function(e){return new Promise(function(t){return setTimeout(function(){return t(!0)},e)})};function B(e){var t,r,n,a,s,o;return w.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=!0,r=!1,n=void 0,c.prev=3,a=e.payload[Symbol.iterator]();case 5:if(t=(s=a.next()).done){c.next=12;break}return o=s.value,c.next=9,Object(k.d)(G,o);case 9:t=!0,c.next=5;break;case 12:c.next=18;break;case 14:c.prev=14,c.t0=c.catch(3),r=!0,n=c.t0;case 18:c.prev=18,c.prev=19,t||null==a.return||a.return();case 21:if(c.prev=21,!r){c.next=24;break}throw n;case 24:return c.finish(21);case 25:return c.finish(18);case 26:case"end":return c.stop()}},F,this,[[3,14,18,26],[19,,21,25]])}function G(e){var t;return w.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(k.c)({type:d.ANALYSIS_STATUS_REQUEST,uuid:e.uuid});case 2:return r.prev=2,r.next=5,Object(k.b)(g.getAnalysationStatus,e.uuid);case 5:if("Finished"!==(t=r.sent).status){r.next=12;break}return r.next=9,Object(k.c)({type:d.ANALYSIS_STATUS_SUCCESS,uuid:e.uuid});case 9:return r.next=11,Object(k.b)(J,e.uuid);case 11:return r.abrupt("return",r.sent);case 12:if("Error"!==t.status){r.next=16;break}return r.next=15,Object(k.c)({type:d.ANALYSIS_REPORT_FAILURE,error:t.error,uuid:e.uuid});case 15:return r.abrupt("return",r.sent);case 16:return r.next=18,Object(k.b)(Q,2e3);case 18:return r.next=20,Object(k.b)(G,e);case 20:return r.abrupt("return",r.sent);case 23:return r.prev=23,r.t0=r.catch(2),r.next=27,Object(k.c)({type:d.ANALYSIS_STATUS_FAILURE,error:r.t0});case 27:return r.next=29,Object(k.b)(Q,2e3);case 29:return r.next=31,Object(k.b)(G,e);case 31:return r.abrupt("return",r.sent);case 32:case"end":return r.stop()}},Y,this,[[2,23]])}function J(e){var t;return w.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(k.c)({type:d.ANALYSIS_REPORT_REQUEST});case 2:return r.prev=2,r.next=5,Object(k.b)(g.getAnalysationReport,e);case 5:return t=r.sent,r.next=8,Object(k.c)({type:d.ANALYSIS_REPORT_SUCCESS,uuid:e,report:t});case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(2),r.next=14,Object(k.c)({type:d.ANALYSIS_REPORT_FAILURE,uuid:e,error:r.t0});case 14:case"end":return r.stop()}},M,this,[[2,10]])}function H(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.e)(d.ANALYSIS_SUBMIT_SUCCESS,B);case 2:case"end":return e.stop()}},P,this)}var q=w.a.mark(W),X=w.a.mark(D),z=function(e){return new Promise(function(t){return setTimeout(function(){return t(!0)},e)})};function W(e){var t;return w.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(k.b)(z,6e4);case 2:return r.next=4,Object(k.c)({type:E.REFRESH_REQUEST});case 4:return r.prev=4,r.next=7,Object(k.b)(g.refreshToken,e.user.auth.access,e.user.auth.refresh);case 7:return t=r.sent,r.next=10,Object(k.c)({type:E.REFRESH_SUCCESS,user:t});case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(4),r.next=16,Object(k.c)({type:E.REFRESH_FAILURE,error:r.t0.toString()});case 16:case"end":return r.stop()}},q,this,[[4,12]])}function D(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!((e=JSON.parse(localStorage.getItem("user")))&&e.auth&&e.auth.access)){t.next=4;break}return t.next=4,Object(k.b)(W,{user:e});case 4:return t.next=6,Object(k.e)([E.LOGIN_SUCCESS,E.REFRESH_SUCCESS],W);case 6:case"end":return t.stop()}},X,this)}var V=w.a.mark($);function $(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([H(),D()]);case 2:case"end":return e.stop()}},V,this)}var K=r(30),Z=r(32),ee=Object(U.createLogger)(),te=Object(Z.a)(),re=Object(T.e)(N,Object(T.a)(ee,K.a,te));te.run($);var ne=r(31),ae=r.n(ne),se=function(e){function t(){var e,r;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).handleMessage=function(e){if(-1!==O.Remix.trustedOrigins.indexOf(e.origin)){var t=JSON.parse(e.data),n=t.action,a=t.key,s=t.type,o=t.value;"notification"===n&&"compiler"===a&&"compilationFinished"===s&&o[0]&&r.props.dispatch(_.analyzeContracts(o[1].contracts,o[2].sources))}},r}return Object(S.a)(t,e),Object(u.a)(t,[{key:"renderIssues",value:function(e){e&&(e=e[0]);var t=[],r=!0,n=!1,s=void 0;try{for(var o,c=e.issues[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value,i=!0,l=!1,S=void 0;try{for(var p,h=u.locations[Symbol.iterator]();!(i=(p=h.next()).done);i=!0){var E=p.value;if(E.sourceList){var d=!0,f=!1,O=void 0;try{for(var b,g=E.sourceList[Symbol.iterator]();!(d=(b=g.next()).done);d=!0){var m=b.value;t.push({title:u.description.head,severity:u.severity,description:u.description.tail,lineColumnPos:E.sourceMap,filePath:m})}}catch(A){f=!0,O=A}finally{try{d||null==g.return||g.return()}finally{if(f)throw O}}}else t.push({title:u.description.head,severity:u.severity,description:u.description.tail,lineColumnPos:E.sourceMap,filePath:e.sourceList[0]})}}catch(A){l=!0,S=A}finally{try{i||null==h.return||h.return()}finally{if(l)throw S}}}}catch(A){n=!0,s=A}finally{try{r||null==c.return||c.return()}finally{if(n)throw s}}return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Issue"),a.a.createElement("th",null,"Location"),a.a.createElement("th",null,"Severity"),a.a.createElement("th",null,"Description"))),a.a.createElement("tbody",null,t.map(function(e){return a.a.createElement("tr",{key:e.title+e.filePath+e.lineColumnPos},a.a.createElement("td",null,e.title),a.a.createElement("td",null,e.filePath,":",e.lineColumnPos),a.a.createElement("td",null,e.severity),a.a.createElement("td",null,e.description))})))}},{key:"render",value:function(){var e=this;if(!this.props.isLoggedIn)return null;var t=null;return this.props.isSubmitting&&(t="Submitting compilation result to MythX analysis..."),this.props.isRequestingReport&&(t="Waiting for analysis report..."),t&&(t=a.a.createElement("p",null,t)),a.a.createElement(ae.a,{target:"window",onMessage:this.handleMessage},t,Object.keys(this.props.reports).map(function(t){return a.a.createElement("section",{key:t},a.a.createElement("hr",null),a.a.createElement("h3",null,"Report id: ",t),e.renderIssues(e.props.reports[t]))}))}}]),t}(a.a.Component);var oe=Object(h.b)(function(e){var t=e.authentication,r=e.analysis;return{isLoggedIn:t.loggedIn,isSubmitting:r.isSubmitting,isRequestingReport:r.isRequestingReport,reports:r.reports}})(se),ce=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(h.a,{store:re},a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"MythX Security Verification"),a.a.createElement(v,null),a.a.createElement(oe,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.178cc230.chunk.js.map